<h1>Asset Usage Value Calculator</h1>

<form [formGroup]="calcForm" (ngSubmit)="onSubmit()" novalidate>
  <div>
    <label for="assetValue">Asset Value:</label>
    <input type="number" id="assetValue" formControlName="assetValue" />
    <ng-container *ngFor="let validation of validationMessages.assetValue">
      <div class="error"
           *ngIf="calcForm.controls['assetValue'].hasError(validation.type) && (calcForm.controls['assetValue'].dirty || calcForm.controls['assetValue'].touched)">
        {{validation.message}}
      </div>
    </ng-container>
  </div>

  <div>
    <label for="age">Asset Age:</label>
    <input type="number" id="age" formControlName="age" />
    <ng-container *ngFor="let validation of validationMessages.age">
      <div class="error"
           *ngIf="calcForm.controls['age'].hasError(validation.type) && (calcForm.controls['age'].dirty || calcForm.controls['age'].touched)">
        {{validation.message}}
      </div>
    </ng-container>
  </div>

  <div>
    <label for="sex">Sex:</label>
    <select id="sex" formControlName="sex">
      <option value="">Select...</option>
      <option value="male">Male</option>
      <option value="female">Female</option>
    </select>
    <ng-container *ngFor="let validation of validationMessages.sex">
      <div class="error"
           *ngIf="calcForm.controls['sex'].hasError(validation.type) && (calcForm.controls['sex'].dirty || calcForm.controls['sex'].touched)">
        {{validation.message}}
      </div>
    </ng-container>
  </div>

  <div>
    <label for="factorMethod">Factor Method:</label>
    <select id="factorMethod" formControlName="factorMethod">
      <option value="">Select...</option>
      <option value="default">Default</option>
      <option value="EenLeven">EenLeven</option>
      <!-- Add more options here as your API supports -->
    </select>
    <ng-container *ngFor="let validation of validationMessages.factorMethod">
      <div class="error"
           *ngIf="calcForm.controls['factorMethod'].hasError(validation.type) && (calcForm.controls['factorMethod'].dirty || calcForm.controls['factorMethod'].touched)">
        {{validation.message}}
      </div>
    </ng-container>
  </div>

  <button type="submit" [disabled]="calcForm.invalid">Calculate</button>
</form>

<!-- API/server error area -->
<div *ngIf="apiError" class="error">
  <p>{{ apiError }}</p>
</div>

<!-- Result display -->
<div *ngIf="calcResult">
  <h2>Calculation Result</h2>
  <p>Eigendomswaarde: <strong>{{ calcResult.assetValue }}</strong></p>
  <p>Factor: <strong>{{ calcResult.usedFactor }}</strong></p>
  <p>Vruchtgebruikwaarde: <strong>{{ calcResult.usageValue }}</strong></p>
</div>
